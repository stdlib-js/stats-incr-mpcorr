// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";function f(f,o,m){var l,d,a,h,p,j,u,b,g,v,c,N,w,x,y,E,J,T;if(!e(f))throw new TypeError(n("0eJ4o",f));if(l=new i(2*f),J=f-1,j=0,u=0,y=0,x=-1,E=0,arguments.length>1){if(!r(o))throw new TypeError(n("0eJ4N",o));if(!r(m))throw new TypeError(n("0eJ4O",m));return b=o,g=m,q}return b=0,g=0,k;function k(e,r){var i,n,o,m,k;if(0===arguments.length)return 0===E?null:1===E?0:E<f?y/(E-1)/(v*c):y/J/(v*c);if(T=2*(x=(x+1)%f),t(e)||t(r))E=f,y=NaN;else{if(E<f)return l[T]=e,l[T+1]=r,j+=(N=e-b)*(e-(b+=N/(E+=1))),u+=(w=r-g)*(p=r-(g+=w/E)),y+=N*p,1===E?0:(v=s(j/(o=E-1)),c=s(u/o),y/o/(v*c));if(1===E)return 0;if(t(l[T])||t(l[T+1])){for(E=1,b=e,g=r,j=0,u=0,y=0,m=0;m<f;m++)if((k=2*m)!==T){if(i=l[k],n=l[k+1],t(i)||t(n)){E=f,y=NaN;break}j+=(N=i-b)*(i-(b+=N/(E+=1))),u+=(w=n-g)*(p=n-(g+=w/E)),y+=N*p}}else!1===t(y)&&(d=l[T]-b,h=l[T+1]-g,j+=(N=(a=e-b)-d)*(d+(e-(b+=N/f))),u+=(w=(p=r-g)-h)*(h+(r-(g+=w/f))),y+=a*p-d*h-N*w/f)}return l[T]=e,l[T+1]=r,v=s(j/J),c=s(u/J),y/J/(v*c)}function q(e,r){var i,n;if(0===arguments.length)return 0===E?null:E<f?y/E/(v*c):y/f/(v*c);if(T=2*(x=(x+1)%f),t(e)||t(r))E=f,y=NaN;else{if(E<f)return l[T]=e,l[T+1]=r,u+=(w=r-g)*w,y+=(N=e-b)*w,v=s((j+=N*N)/(E+=1)),c=s(u/E),y/E/(v*c);if(t(l[T])||t(l[T+1])){for(j=0,u=0,y=0,i=0;i<f;i++)if((n=2*i)!==T){if(t(l[n])||t(l[n+1])){E=f,y=NaN;break}N=l[n]-b,j+=N*N,w=l[n+1]-g,u+=w*w,y+=N*w}}else!1===t(y)&&(d=l[T]-b,a=e-b,h=l[T+1]-g,j+=(a-d)*(a+d),u+=((p=r-g)-h)*(p+h),y+=a*p-d*h)}return l[T]=e,l[T+1]=r,v=s(j/f),c=s(u/f),y/f/(v*c)}}export{f as default};
//# sourceMappingURL=index.mjs.map
