// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";function f(f,m,o){var l,d,a,p,h,j,u,b,g,v,c,N,w,x,y,E,I,T;if(!r(f))throw new TypeError(n("1Ip4b",f));if(l=new i(2*f),I=f-1,j=0,u=0,y=0,x=-1,E=0,arguments.length>1){if(!e(m))throw new TypeError(n("1Ip4A",m));if(!e(o))throw new TypeError(n("1Ip4B",o));return b=m,g=o,function(r,e){var i,n;if(0===arguments.length)return 0===E?null:E<f?y/E/(v*c):y/f/(v*c);if(T=2*(x=(x+1)%f),t(r)||t(e))E=f,y=NaN;else{if(E<f)return l[T]=r,l[T+1]=e,u+=(w=e-g)*w,y+=(N=r-b)*w,v=s((j+=N*N)/(E+=1)),c=s(u/E),y/E/(v*c);if(t(l[T])||t(l[T+1])){for(j=0,u=0,y=0,i=0;i<f;i++)if((n=2*i)!==T){if(t(l[n])||t(l[n+1])){E=f,y=NaN;break}N=l[n]-b,j+=N*N,w=l[n+1]-g,u+=w*w,y+=N*w}}else!1===t(y)&&(d=l[T]-b,a=r-b,p=l[T+1]-g,j+=(a-d)*(a+d),u+=((h=e-g)-p)*(h+p),y+=a*h-d*p)}return l[T]=r,l[T+1]=e,v=s(j/f),c=s(u/f),y/f/(v*c)}}return b=0,g=0,function(r,e){var i,n,m,o,k;if(0===arguments.length)return 0===E?null:1===E?0:E<f?y/(E-1)/(v*c):y/I/(v*c);if(T=2*(x=(x+1)%f),t(r)||t(e))E=f,y=NaN;else{if(E<f)return l[T]=r,l[T+1]=e,j+=(N=r-b)*(r-(b+=N/(E+=1))),u+=(w=e-g)*(h=e-(g+=w/E)),y+=N*h,1===E?0:(v=s(j/(m=E-1)),c=s(u/m),y/m/(v*c));if(1===E)return 0;if(t(l[T])||t(l[T+1])){for(E=1,b=r,g=e,j=0,u=0,y=0,o=0;o<f;o++)if((k=2*o)!==T){if(i=l[k],n=l[k+1],t(i)||t(n)){E=f,y=NaN;break}j+=(N=i-b)*(i-(b+=N/(E+=1))),u+=(w=n-g)*(h=n-(g+=w/E)),y+=N*h}}else!1===t(y)&&(d=l[T]-b,p=l[T+1]-g,j+=(N=(a=r-b)-d)*(d+(r-(b+=N/f))),u+=(w=(h=e-g)-p)*(p+(e-(g+=w/f))),y+=a*h-d*p-N*w/f)}return l[T]=r,l[T+1]=e,v=s(j/I),c=s(u/I),y/I/(v*c)}}export{f as default};
//# sourceMappingURL=index.mjs.map
